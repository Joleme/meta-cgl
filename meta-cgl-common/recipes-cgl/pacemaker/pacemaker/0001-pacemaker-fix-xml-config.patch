From ac1ff1d538d2be205fbcc9676c6497a1395b71d8 Mon Sep 17 00:00:00 2001
From: Changqing Li <changqing.li@windriver.com>
Date: Fri, 10 Aug 2018 14:59:33 +0800
Subject: [PATCH] pacemaker: fix xml config

Signed-off-by: Bian Naimeng <biannm@cn.fujitsu.com>

update to version 1.1.19
Signed-off-by: Changqing Li <changqing.li@windriver.com>
---
 configure.ac | 17 ++++++-----------
 1 file changed, 6 insertions(+), 11 deletions(-)

diff --git a/configure.ac b/configure.ac
index 3bf1914..345caeb 100644
--- a/configure.ac
+++ b/configure.ac
@@ -555,7 +555,6 @@ AC_PATH_PROGS(TAR, tar)
 AC_PATH_PROGS(MD5, md5)
 AC_PATH_PROGS(TEST, test)
 PKG_PROG_PKG_CONFIG
-AC_PATH_PROGS(XML2CONFIG, xml2-config)
 AC_PATH_PROGS(VALGRIND_BIN, valgrind, /usr/bin/valgrind)
 AC_DEFINE_UNQUOTED(VALGRIND_BIN, "$VALGRIND_BIN", Valgrind command)
 
@@ -805,17 +804,13 @@ dnl AC_CHECK_HEADERS(netinet/icmp6.h)
 dnl AC_CHECK_HEADERS(netinet/ip6.h)
 dnl AC_CHECK_HEADERS(netinet/ip_icmp.h)
 
-AC_MSG_CHECKING(for special libxml2 includes)
-if test "x$XML2CONFIG" = "x"; then
-   AC_MSG_ERROR(libxml2 config not found)
-else
-   XML2HEAD="`$XML2CONFIG --cflags`"
-   AC_MSG_RESULT($XML2HEAD)
-   AC_CHECK_LIB(xml2, xmlReadMemory)
-   AC_CHECK_LIB(xslt, xsltApplyStylesheet)
-fi
+PKG_CHECK_MODULES([XML], [libxml-2.0])
+PKG_CHECK_MODULES([XSLT], [libxslt])
+
+AC_CHECK_LIB(xml2, xmlReadMemory)
+AC_CHECK_LIB(xslt, xsltApplyStylesheet)
 
-CPPFLAGS="$CPPFLAGS $XML2HEAD"
+CPPFLAGS="$CPPFLAGS $XML_CFLAGS"
 
 AC_CHECK_HEADERS(libxml/xpath.h)
 AC_CHECK_HEADERS(libxslt/xslt.h)
-- 
2.7.4

